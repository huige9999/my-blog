---
title: Tailscale + RDP 远程公司主机：实战排坑笔记
date: 2026-02-12
description: 公司主机远程方案复盘：搭建步骤、常见故障与稳定性设置。
---

# Tailscale + RDP 远程公司主机：实战排坑笔记

这篇是我们完整实操后的复盘总结。

如果你后面要搭这套「公司高性能主机 + 家里轻薄本 / Mac」的方案，照着做基本就能跑通。

---

## 一、方案核心和优势

- 组网工具：**Tailscale**
基于 WireGuard，免费、好配，不需要公网 IP。
- 远程控制：**Windows 原生 RDP**
画质和延迟都比很多第三方远控工具更稳，还支持多显示器、带宽占用也低。
- 适用场景：
公司主机负责开发、渲染、跑数据；家里设备只做“入口”。

## 二、基础准备和标准流程

### 1. 先确认系统版本（关键）

- 被控端（公司电脑）：建议 **Windows 10/11 Pro 或企业版**。家庭版默认不支持被远程。
- 主控端（家里设备）：Win/Mac/iPad/手机都可以。

### 2. 标准配置流程

1. 公司和家里设备都安装 Tailscale，并登录同一账号。
2. 记下公司电脑的 Tailscale IP（通常是 `100.x.x.x`）。
3. 在公司电脑打开 `设置 -> 系统 -> 远程桌面`，开启远程桌面。
4. 家里端发起连接：
`Win + R -> mstsc`（Mac 用 Microsoft Remote Desktop），输入公司电脑的 `100.x.x.x`，再输入公司电脑的用户名和系统登录密码（不是 PIN 码）。

---

## 三、核心排坑指南（实战版）

很多时候标准流程走完，还是连不上。下面是这次实战里真正卡人的几个点。

### 坑一：Ping 通了，但 RDP 还是连不上（防火墙规则拦截）

**症状：**

- Ping Tailscale IP 延迟很低（例如 3-5ms）。
- 但 `Test-NetConnection <IP> -Port 3389` 返回 `False`。

**原因：**
Windows 防火墙会把 Tailscale 识别成公用网络，而默认 RDP 入站规则常常只放行本地子网。

**处理：**

1. 公司电脑 `Win + R`，输入 `wf.msc`。
2. 进入【入站规则】，找到“远程桌面 - 用户模式(TCP-In)”规则并双击。
3. 在【作用域】里，把远程 IP 地址改成“任何 IP 地址 (Any IP address)”。
4. 在【高级】里，把边缘遍历设为“允许边缘遍历”（稳妥起见）。

### 坑二：防火墙都关了，还是连不上（RDP 服务没监听）

**症状：**

- 防火墙关闭后依旧连不上。
- 公司电脑执行 `netstat -an | findstr 3389` 没有任何输出（正常应看到 `LISTENING`）。

**原因：**
系统页面显示“远程桌面已开启”，但底层 `Remote Desktop Services` 可能处于异常状态，没有真正监听 3389。

**处理：**

1. `Win + R` 输入 `services.msc`。
2. 找到 `Remote Desktop Services`。
3. 右键“重新启动”，并把启动类型设为“自动”。
4. 再跑一次 `netstat`，看到 `3389 ... LISTENING` 后通常就能连接。

### 坑三：前一天能连，第二天早上直接超时（睡眠和网卡省电）

**症状：**

- 下班前只是锁屏，第二天却连不上。
- 到现场发现敲键盘后机器才醒。

**原因：**
锁屏不等于不休眠。设备睡眠后网卡可能断电，Tailscale 会掉线；网卡本身也可能有省电策略。

**处理（建议全做）：**

1. 关掉自动睡眠：
`设置 -> 系统 -> 电源和电池 -> 屏幕和睡眠`，把“接通电源时，将设备置于睡眠状态”设为“从不”。
2. 关闭网卡省电：
`设备管理器 -> 网络适配器 -> 你的网卡 -> 电源管理`，取消“允许计算机关闭此设备以节约电源”。
3. 开启 Tailscale 无人值守：
任务栏 Tailscale 图标 -> `Preferences` -> 勾选 `Run unattended`。

---

## 四、进阶：Mac 连接和无头模式

### 1. Mac 作为主控端

- 工具：App Store 安装 **Microsoft Remote Desktop**。
- 按键差异：`Command` 更接近 Windows 的 Win 键；远程里的复制粘贴通常用 `Ctrl + C / V` 更稳。
- 显示设置：连接卡片 `Edit -> Display` 勾选 `"Optimize for Retina displays"`，再按需要把 Windows 缩放调到 150% 或 200%。

### 2. 无显示器运行（Headless）

- RDP 会生成虚拟显示器，所以大部分场景下拔掉物理显示器也能正常远程。
- 例外情况：
如果拔显示器后重启就连不上，可能是主板自检依赖显示器信号。这时插一个 HDMI 显卡欺骗器（诱骗头）一般就能解决。

